function forms(){const e=document.querySelectorAll("form"),t=document.querySelectorAll("._req"),l="Загрузка ...",o="Спасибо, скоро с Вами свяжемся",n="Что-то пошло не так";function a(e){let t=0;function l(){t++}return e.forEach(e=>{switch(document.createElement("div").classList.add("status-message"),e.addEventListener("input",t=>{let l=e.nextElementSibling;if(e.classList.remove("_error"),l.style.opacity=0,console.log("opacity"),"agreement"===e.name){let t=e.previousElementSibling;l.style.opacity=1,t.style.opacity=0}}),e.name){case"phone":if(!function(e){console.log("!");let t=e.value;if(console.log(t),t=t.replace(/[^0-9]/g,""),console.log(t),console.log(t.length),11===t.length)return console.log("!"),!0}(e)){console.log("!");let t=e.nextElementSibling;l(),e.classList.add("_error"),t.style.opacity=1}console.log("phone");break;case"name":if(0===e.value.length){let t=e.nextElementSibling;l(),e.classList.add("_error"),t.style.opacity=1}console.log("name");break;case"agreement":if(!1===e.checked){let t=e.previousElementSibling;l(),e.classList.add("_error"),t.style.opacity=1}break;case"email":if(!/^\w+([\.-]?\w+)*@\w+([\.-]?\w+)*(\.\w{2,8})+$/.test(e.value)){let t=e.nextElementSibling;l(),e.classList.add("_error"),t.style.opacity=1}}}),t<=0}e.forEach(e=>{e.addEventListener("submit",s=>{s.preventDefault();let c=e.querySelectorAll("input"),r=document.createElement("div");if(r.classList.add("status-message"),e.appendChild(r),!a(c))return;const i=new FormData(e);if(e.querySelector("h4")){let t=e.querySelector("h4").innerHTML.slice(22);console.log(t),i.append("Тариф",t)}r.textContent=l,(async(e,t)=>{let l=await fetch(e,{method:"POST",body:t});return await l.text()})("./telegram.php",i).then(e=>{console.log(e),r.textContent=o}).catch(()=>{r.textContent=n}).finally(()=>{(e=>{e.forEach(e=>{e.value=""})})(t),setTimeout(()=>{r.remove()},3e3)})})})}export default forms;
